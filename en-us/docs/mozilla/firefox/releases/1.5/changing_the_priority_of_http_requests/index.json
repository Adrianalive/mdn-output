{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Changing the Priority of HTTP Requests","mdn_url":"/en-US/docs/Mozilla/Firefox/Releases/1.5/Changing_the_priority_of_HTTP_requests","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox developer release notes</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Releases\">Firefox developer release notes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Add-ons</summary>\n            <ol>\n              <li><a href=\"/en-US/Add-ons/WebExtensions\">Browser extensions</a></li>\n              <li><a href=\"/en-US/Add-ons/Themes\">Themes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox internals</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/\">Mozilla project</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Gecko\">Gecko</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Headless_mode\">Headless mode</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/JavaScript_code_modules\">JavaScript code modules</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/js-ctypes\">JS-ctypes</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/MathML_Project\">MathML project</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/MFBT\">MFBT</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Projects\">Mozilla projects</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Preferences\">Preference system</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/WebIDL_bindings\">WebIDL bindings</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Tech/XPCOM\">XPCOM</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Tech/XUL\">XUL</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Building and contributing</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions\">Build instructions</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Configuring_Build_Options\">Configuring build options</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions/How_Mozilla_s_build_system_works\">How the build system works</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Source_Code/Mercurial\">Mozilla source code</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Localization\">Localization</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Mercurial\">Mercurial</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/QA\">Quality assurance</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Using_Mozilla_code_in_other_projects\">Using Mozilla code in other projects</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":"introduction","title":"Introduction","isH3":true,"content":"<p>In <a href=\"/en-US/docs/Mozilla/Firefox/Releases/1.5\">Firefox 1.5</a> (Gecko 1.8), an API was added to support changing the priority of <a href=\"/en-US/docs/Web/HTTP\">HTTP</a> requests. Prior to this, there was no way to directly indicate that a request was of a different priority. The API is defined in <a href=\"/en-US/docs/nsISupportsPriority\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsISupportsPriority</a>, but is defined in very generic terms so that any object can implement this interface to enable the concept of priority. This article deals specifically with using that interface to change the priority of HTTP requests.</p>\n<p>At the time of this writing, changing the priority of an HTTP request only affects the order in which connection attempts are made. This means that the priority only has an effect when there are more connections (to a server) than are allowed.</p>\n<p>The examples in this document are all written in <a href=\"/en-US/docs/Web/JavaScript\">JavaScript</a> using <a href=\"/en-US/docs/XPCOM\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">XPCOM</a>.</p>"}},{"type":"prose","value":{"id":"using_the_api","title":"Using the API","isH3":true,"content":"<p>It should be noted that the value of the <code>priority</code> attribute follows UNIX conventions, with smaller numbers (including negative numbers) having higher priority.</p>\n<h4 id=\"accessing_priority_from_an_nsichannel\">Accessing priority from an nsIChannel</h4>\n<p>To change the priority of an HTTP request, you need access to the <a href=\"/en-US/docs/XPCOM_Interface_Reference/nsIChannel\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsIChannel</a> that the request is being made on. If you do not have an existing channel, then you can create one as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> ios <span class=\"token operator\">=</span> Components<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">[</span><span class=\"token string\">\"@mozilla.org/network/io-service;1\"</span><span class=\"token punctuation\">]</span>\n                    <span class=\"token punctuation\">.</span><span class=\"token function\">getService</span><span class=\"token punctuation\">(</span>Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsIIOService<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> ch <span class=\"token operator\">=</span> ios<span class=\"token punctuation\">.</span><span class=\"token function\">newChannel</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.example.com/\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Once you have an <a href=\"/en-US/docs/XPCOM_Interface_Reference/nsIChannel\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsIChannel</a>, you can access the priority as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ch <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsISupportsPriority</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ch<span class=\"token punctuation\">.</span>priority <span class=\"token operator\">=</span> Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsISupportsPriority<span class=\"token punctuation\">.</span><span class=\"token constant\">PRIORITY_LOWEST</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>For convenience, the interface defines several standard priority values that you can use, ranging from <code>PRIORITY_HIGHEST</code> to <code>PRIORITY_LOWEST</code>.</p>\n<h4 id=\"getting_an_nsichannel_from_xmlhttprequest\">Getting an nsIChannel from XMLHttpRequest</h4>\n<p>If you are programming in <a href=\"/en-US/docs/Web/JavaScript\">JavaScript</a>, you will probably want to use <a href=\"/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a>, a much higher level abstraction of an HTTP request. You can access the <code>channel</code> member of an <a href=\"/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a> once you have called the <code>open</code> method on it, as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> req <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://www.example.com\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>channel <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsISupportsPriority</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  req<span class=\"token punctuation\">.</span>channel<span class=\"token punctuation\">.</span>priority <span class=\"token operator\">=</span> Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsISupportsPriority<span class=\"token punctuation\">.</span><span class=\"token constant\">PRIORITY_LOWEST</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> This example uses a synchronous <a href=\"/en-US/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a>, which you should not use in practice.</p>\n</div>\n<h4 id=\"adjusting_priority\">Adjusting priority</h4>\n<p><a href=\"/en-US/docs/nsISupportsPriority#adjustPriority\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsISupportsPriority</a> includes a convenience method named <code>adjustPriority</code>. You should use this if you want to alter the priority of a request by a certain amount. For example, if you would like to make a request have slightly higher priority than it currently has, you could do the following:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// assuming we already have a nsIChannel from above</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ch <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsISupportsPriority</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ch<span class=\"token punctuation\">.</span><span class=\"token function\">adjustPriority</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Remember that lower numbers mean higher priority, so adjusting by a negative number will serve to increase the request's priority.</p>"}}],"toc":[],"summary":"In Firefox 1.5 (Gecko 1.8), an API was added to support changing the priority of HTTP requests. Prior to this, there was no way to directly indicate that a request was of a different priority. The API is defined in nsISupportsPriority, but is defined in very generic terms so that any object can implement this interface to enable the concept of priority. This article deals specifically with using that interface to change the priority of HTTP requests.","popularity":0,"modified":"2022-01-18T23:06:03.000Z","other_translations":[{"title":"Die Priorität von HTTP-Anfragen ändern","locale":"de","native":"Deutsch"},{"title":"HTTPリクエストの優先順位の変更","locale":"ja","native":"日本語"}],"source":{"folder":"en-us/mozilla/firefox/releases/1.5/changing_the_priority_of_http_requests","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/mozilla/firefox/releases/1.5/changing_the_priority_of_http_requests/index.md","last_commit_url":"https://github.com/mdn/content/commit/e703747a072adc736f7a1931d2993250f81f70aa","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Mozilla","title":"Mozilla"},{"uri":"/en-US/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases","title":"Firefox release notes for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/1.5","title":"Firefox 1.5 for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/1.5/Changing_the_priority_of_HTTP_requests","title":"Changing the Priority of HTTP Requests"}],"pageTitle":"Changing the Priority of HTTP Requests - Mozilla | MDN","noIndexing":false}}