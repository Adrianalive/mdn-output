{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"The structured clone algorithm","mdn_url":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","locale":"en-US","native":"English (US)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong>structured clone algorithm</strong> copies complex JavaScript objects.\n  It is used internally when invoking <a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a>, to transfer data between <a href=\"/en-US/docs/Web/API/Worker\">Workers</a> via <a href=\"/en-US/docs/Web/API/Worker/postMessage\" title=\"postMessage()\"><code>postMessage()</code></a>, storing objects with <a href=\"/en-US/docs/Glossary/IndexedDB\">IndexedDB</a>, or copying objects for <a href=\"#see_also\">other APIs</a>.\n</p>\n<p>It clones by recursing through the input object while maintaining a map of previously visited references, to avoid infinitely traversing cycles.</p>"}},{"type":"prose","value":{"id":"things_that_dont_work_with_structured_clone","title":"Things that don't work with structured clone","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function\"><code>Function</code></a> objects cannot be duplicated by the structured clone algorithm; attempting to throws a <code>DataCloneError</code> exception.</li>\n  <li>Cloning DOM nodes likewise throws a <code>DataCloneError</code> exception.</li>\n  <li>Certain object properties are not preserved:\n    <ul>\n      <li>The <code>lastIndex</code> property of <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a> objects is not preserved.</li>\n      <li>\n        Property descriptors, setters, getters, and similar metadata-like features are not duplicated.\n        For example, if an object is marked readonly with a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\">property descriptor</a>, it will be read/write in the duplicate, since that's the default.\n      </li>\n      <li>The prototype chain is not walked or duplicated.</li>\n    </ul>\n  </li>\n</ul>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> Native <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\"><code>Error</code></a> types can be cloned in Chrome, and Firefox is <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1556604\" class=\"external\" rel=\" noopener\">working on it</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"supported_types","title":"Supported types","isH3":false,"content":"<table class=\"no-markdown\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Object type</th>\n      <th scope=\"col\">Notes</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Data_structures#primitive_values\">All primitive types</a></td>\n      <td>However, not symbols.</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean\"><code>Boolean</code></a> objects</td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/String\"><code>String</code></a> objects</td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\"><code>Date</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a></td>\n      <td><code>lastIndex</code> is not preserved.</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/File\"><code>File</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/FileList\"><code>FileList</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\"><code>ArrayBuffer</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/ArrayBufferView\"><code>ArrayBufferView</code></a></td>\n      <td>Including other <a href=\"/en-US/docs/Web/JavaScript/Typed_arrays\">typed arrays</a>.</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/ImageBitmap\"><code>ImageBitmap</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/ImageData\"><code>ImageData</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\"><code>Array</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object\"><code>Object</code></a></td>\n      <td><strong>Only</strong> plain objects (e.g. from object literals)</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\"><code>Map</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"><code>Set</code></a></td>\n      <td></td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://www.w3.org/TR/html5/infrastructure.html#safe-passing-of-structured-data\" class=\"external\" rel=\" noopener\">HTML Specification: Safe passing of structured data</a></li>\n  <li><a href=\"/en-US/docs/Glossary/Transferable_objects\">Transferable objects</a></li>\n  <li><a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Window/history\"><code>window.history</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Window/postMessage\"><code>window.postMessage()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n  <li><a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n</ul>"}}],"toc":[{"text":"Things that don't work with structured clone","id":"things_that_dont_work_with_structured_clone"},{"text":"Supported types","id":"supported_types"},{"text":"See also","id":"see_also"}],"summary":"The structured clone algorithm copies complex JavaScript objects.\n  It is used internally when invoking structuredClone(), to transfer data between Workers via postMessage(), storing objects with IndexedDB, or copying objects for other APIs.","popularity":0.0069,"modified":"2021-12-01T06:01:14.000Z","other_translations":[{"title":"L’algorithme de clonage structuré","locale":"fr","native":"Français"},{"title":"構造化複製アルゴリズム","locale":"ja","native":"日本語"},{"title":"The structured clone algorithm","locale":"ko","native":"한국어"},{"title":"Алгоритм структурированного клонирования","locale":"ru","native":"Русский"},{"title":"结构化克隆算法","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/web_workers_api/structured_clone_algorithm","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md","last_commit_url":"https://github.com/mdn/content/commit/0f1f6f74804725f379465c09f698b88611292c90","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Web_Workers_API","title":"Web Workers API"},{"uri":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","title":"The structured clone algorithm"}],"pageTitle":"The structured clone algorithm - Web APIs | MDN","noIndexing":false}}